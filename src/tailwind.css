@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html, body { overflow-x: hidden; }
  img { max-width: 100%; height: auto; }
}

@layer components {
  /* Generic sections */
  .section { @apply bg-white py-10 sm:py-12 md:py-16; }
  .section-alt { @apply bg-muted py-10 sm:py-12 md:py-16; }
  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2 rounded-mdplus font-extrabold whitespace-nowrap border border-transparent shadow-sm transition-colors;
  }
  .btn-sm {
    @apply text-sm px-3 py-2 min-h-[40px] leading-tight whitespace-nowrap;
  }
  .btn-brand {
    @apply bg-brand text-white hover:bg-brandDeep focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand;
  }
  .btn-accent {
    @apply bg-accent text-ink hover:bg-accentDark focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent;
  }
  .btn-outline {
    @apply bg-white text-brand border border-brand/35 hover:bg-brand/5;
  }
  .btn--orderlist { @apply min-w-[11.5rem]; }
  .btn--no-shrink { @apply shrink-0; }
  .btn--rfq { @apply min-w-[8.5rem]; }
  .btn-card { @apply text-sm sm:text-base py-2.5 px-3 min-h-[44px] whitespace-nowrap; }

  /* Global: prevent CTA clipping and horizontal overflow */
  :where(.flex):has(.btn) { flex-wrap: wrap; }
  :where(.btn) { flex-shrink: 0; }

  /* Utility: consistent horizontal button rows that wrap on small widths */
  .btn-row { @apply flex gap-3 flex-wrap; }
  .btn-row > .btn { @apply shrink-0; }

  /* Forms */
  .input, .select, .textarea {
    @apply w-full rounded-brand border border-gray-300 px-3 py-2 bg-white text-dark placeholder:text-dark/60 focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent;
  }
  .textarea { @apply min-h-[120px]; }
  .input-sm { @apply min-h-9 px-2 py-1.5; }
  .select { @apply pr-8; }

  /* Cards */
  .card {
    @apply bg-white border border-black/10 rounded-2xl shadow-sm overflow-hidden;
  }
  .card--hover {
    @apply transition will-change-transform hover:-translate-y-0.5 hover:shadow-2xl;
  }
  .card-body { @apply p-4; }

  /* Pills & badges */
  .pill {
    @apply inline-flex items-center justify-center gap-2 px-4 py-1.5 rounded-full font-extrabold text-sm border border-black/10 text-dark bg-black/5;
  }
  .pill--sm { @apply px-3 py-1 text-[0.8125rem]; }
  .pill--primary { @apply bg-brand/10 border-brand/20 text-[#7d0047]; }
  .pill--secondary { @apply bg-teal/10 border-teal/20 text-teal; }
  .pill--neutral { @apply bg-black/5 border-black/10 text-dark; }
  .dot { @apply inline-block w-2 h-2 rounded-full bg-current; }

  .badge {
    @apply inline-flex items-center gap-1.5 px-2 py-0.5 text-xs rounded-md border border-light bg-white text-dark;
  }
  .badge--ok { @apply border-teal/30 text-teal bg-teal/10; }
  .badge--soft { @apply border-brand/15 text-brand bg-brand/10 font-extrabold; }

  /* Alerts & toasts */
  .alert { @apply rounded-xl border px-3 py-2 text-[0.95rem]; }
  .alert--success { @apply border-teal text-teal bg-teal/10; }
  .alert--warning { @apply border-amber-500 text-amber-800 bg-amber-500/10; }
  .alert--error { @apply border-brand text-brand bg-brand/10; }

  .toasts {
    @apply fixed left-1/2 bottom-[calc(1rem+env(safe-area-inset-bottom))] -translate-x-1/2 z-[90] grid gap-2 w-[min(92vw,400px)];
  }
  @media (min-width: 768px) {
    .toasts { @apply left-auto right-[calc(1rem+env(safe-area-inset-right))] top-[calc(1rem+env(safe-area-inset-top))] bottom-auto translate-x-0 w-[min(92vw,380px)]; }
  }
  .toast {
    @apply pointer-events-auto bg-white text-dark border border-light rounded-xl shadow-2xl p-2.5 grid grid-cols-[auto_1fr_auto] gap-2.5 items-center opacity-0 translate-y-1 transition;
  }
  .toast[data-state="open"] { @apply opacity-100 translate-y-0; }
  .toast--success { @apply border-l-4 border-teal; }
  .toast--warning { @apply border-l-4 border-accent; }
  .toast--error { @apply border-l-4 border-brand; }
  .toast--info { @apply border-l-4 border-brand; }

  /* Dialogs */
  .dialog-root { @apply isolate z-[95]; }
  .dialog-overlay { @apply absolute inset-0 bg-black/35 opacity-0 transition-opacity; }
  .dialog-viewport { @apply absolute inset-0 grid place-items-center p-4; }
  .dialog-panel {
    @apply w-full max-w-[720px] bg-white/80 border border-white/60 rounded-2xl shadow-2xl opacity-0 -translate-y-[var(--dialog-offset-top,0px)] scale-95 transition;
  }
  .dialog-panel[data-state="open"] { @apply opacity-100 scale-100; }
  .dialog-overlay[data-state="open"] { @apply opacity-100 backdrop-blur; }
  .dialog--sm { @apply max-w-[520px]; }
  .dialog--md { @apply max-w-[720px]; }
  .dialog--lg { @apply max-w-[880px]; }

  /* Navigation & header */
  .header-topband { @apply bg-white border-b border-light shadow-sm; }
  .header-navband { @apply bg-brand text-white; }
  .mainnav-link { @apply relative inline-flex items-center gap-2 whitespace-nowrap; }
  /* Ensure mega host anchors flush under nav with no white bar */
  #megaHost { @apply relative z-[65] h-0; }
  .mega-wrap { position: absolute; left: 0; right: 0; top: 0; }
  .mega-panel { @apply bg-white border border-light rounded-brand shadow-2xl overflow-hidden opacity-0 -translate-y-1.5 transition data-[state=open]:opacity-100 data-[state=open]:translate-y-0 border-t-0 rounded-t-none; }
  .mega-link { @apply block px-1.5 py-1 text-[0.95rem] leading-snug text-dark/95 rounded hover:text-brand hover:bg-light/35 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand; }
  .nav-link-premium { @apply relative inline-flex items-center gap-2 px-4 py-3 rounded-md text-white/90 font-black text-[0.9rem] tracking-[.01em] transition-colors hover:text-white; }

  /* Footer */
  .footer-premium {
    @apply text-white relative;
    background-color: theme('colors.brand');
    background-image: radial-gradient(1200px 480px at 50% -10%, rgba(255,255,255,0.06), rgba(255,255,255,0) 60%),
      linear-gradient(180deg, theme('colors.brandMid') 0%, theme('colors.brand') 45%, theme('colors.brandDeep') 100%);
  }
  .footer-divider { @apply bg-white border-t border-black/10 shadow-[inset_0_-1px_0_rgba(255,255,255,0.6),0_-8px_24px_rgba(0,0,0,0.05)]; }
  .footer-premium > .container, .footer-divider > .container { @apply max-w-[80rem] 2xl:max-w-[90rem]; }
  .footer-premium h2 { @apply text-white font-black tracking-tight; }
  .footer-premium a { @apply text-white no-underline hover:no-underline; }
  /* Ensure text-dark utilities don't invert footer */
  .footer-premium :where(.text-dark) { color: #fff !important; }
  .footer-premium :where([class*="text-dark/"]) { color: rgba(255,255,255,0.92) !important; }
  /* Subfooter payment band */
  .subfooter { @apply bg-paper border-t border-black/10; }
  .subfooter > .container { @apply max-w-[80rem] 2xl:max-w-[90rem]; }
  .subfooter .payicons { @apply inline-flex gap-2 sm:gap-3 flex-wrap; }
  .subfooter .payicon { @apply inline-flex items-center justify-center text-dark/75 leading-none p-[0.15rem] rounded-md hover:text-dark/95 hover:bg-black/5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand; }
  .subfooter .payicon svg, .subfooter .payicon img { @apply w-9 h-6 block; }
  .footer-grid { @apply grid gap-6 md:[grid-template-columns:minmax(0,2fr)_repeat(3,minmax(0,1fr))_auto] md:[column-gap:3rem] md:[row-gap:2rem]; }
  .social-link { @apply inline-flex items-center justify-center text-white hover:bg-white/10 rounded-md p-1; }
  .social-icon { @apply w-5 h-5; }

  /* Pricing & tiers */
  .tier-card { @apply relative border border-light rounded-xlplus bg-white shadow-card transition hover:-translate-y-0.5 hover:shadow-[0_12px_28px_rgba(0,0,0,0.12)] hover:border-black/10; }
  .tier-card__bar { @apply absolute inset-x-0 top-0 h-1 rounded-t-xlplus; }
  .tier-card__head { @apply flex items-center justify-between gap-2; }
  .tier-card__title { @apply font-black tracking-tight; }
  .tier-card__text { @apply text-[0.95rem] text-dark/80; }
  .tier-card__list { @apply mt-2 text-[0.9rem]; }
  .list-check { @apply mt-2; }
  .list-check li { @apply flex items-start gap-2; }
  .tier-dot { @apply inline-block w-2.5 h-2.5 rounded-full; }
  .pricing-table { @apply w-full border border-light rounded-xl overflow-hidden bg-white; }
  .pricing-table thead th { @apply bg-brand text-white font-black tracking-[.01em]; }
  .pricing-table th, .pricing-table td { @apply px-4 py-3 text-left; }
  .pricing-table tbody tr:nth-child(odd) { @apply bg-white; }
  .pricing-table tbody tr:nth-child(even) { @apply bg-muted; }
  .pricing-table tbody tr:hover { @apply bg-brand/5; }

  /* Category tiles */
  .cat-card { @apply flex flex-col items-center text-center bg-white border border-black/10 rounded-2xl p-4 transition hover:-translate-y-0.5 hover:shadow-2xl focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand; }
  .cat-card__media { @apply w-full aspect-square rounded-[0.8rem] overflow-hidden bg-white; }
  .cat-card__img { @apply w-full h-full object-cover object-center block; }
  .cat-card__title { @apply mt-3 font-black tracking-tight text-dark; }

  /* Utilities */
  .divider { @apply h-px bg-black/10; }
  .h-scroll { @apply overflow-x-auto overflow-y-hidden touch-pan-x overscroll-x-contain; }
  .callout-accent { @apply bg-accent/5 border border-accent/10 rounded-xlplus; }
  .callout-teal { @apply bg-teal/5 border border-teal/10 rounded-xlplus; }
  .focus-teal { @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-teal/40; }

  /* Hero backgrounds */
  .hero-brand-strong {
    background-color: transparent;
    background-image: linear-gradient(
      to bottom,
      rgb(158 0 89 / 0.32) 0%,
      rgb(158 0 89 / 0.24) 12%,
      rgb(158 0 89 / 0.16) 28%,
      rgb(158 0 89 / 0.08) 48%,
      transparent 100%
    );
  }
  .hero-brand-soft {
    background-color: transparent;
    background-image: linear-gradient(
      to bottom,
      rgb(158 0 89 / 0.22) 0%,
      rgb(158 0 89 / 0.14) 18%,
      rgb(158 0 89 / 0.08) 36%,
      rgb(158 0 89 / 0.04) 58%,
      transparent 100%
    );
  }
  .hero-brand-calm {
    /* Weakest variant: longer, subtler fade for content pages */
    background-color: transparent;
    background-image: linear-gradient(
      to bottom,
      rgb(158 0 89 / 0.12) 0%,
      rgb(158 0 89 / 0.08) 24%,
      rgb(158 0 89 / 0.05) 52%,
      rgb(158 0 89 / 0.02) 76%,
      transparent 100%
    );
  }
  .section-brand-tint { @apply bg-brand/5; }
  .section-teal-tint { @apply bg-teal/5; }

  /* Typography helpers */
  .eyebrow { @apply text-[0.8rem] tracking-wider font-extrabold text-dark/70; }
  .section-title { @apply font-black text-dark tracking-tight; }
  .section-subtitle { @apply text-dark/80 text-subheading font-bold; }

  /* Blog content and meta */
  .prose :where(img) { @apply rounded-xlplus border border-light shadow-card; }
  .prose :where(blockquote) { @apply border-l-4 border-brand/80 pl-4 italic text-dark/80; }
  .prose :where(h2) { @apply text-dark; }
  .prose :where(a) { @apply text-brand font-semibold no-underline hover:underline; }

  /* Feature cards */
  .feature-card { @apply flex gap-4 p-[1.1rem] bg-white border border-light rounded-xlplus shadow-card transition hover:-translate-y-0.5 hover:shadow-2xl; }
  .feature-icon { @apply flex-none w-11 h-11 rounded-full inline-flex items-center justify-center text-white bg-brand shadow-[inset_0_0_0_1px_rgba(255,255,255,0.15)]; }
  .feature-icon--teal { @apply bg-teal; }
  .feature-icon--accent { @apply bg-accent text-ink; }
  .feature-title { @apply font-extrabold text-dark tracking-tight; }
  .feature-text { @apply text-dark/80 text-[0.95rem]; }

  /* Skeletons */
  @keyframes sg-shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
  .skeleton { @apply rounded-brand relative overflow-hidden; background: linear-gradient(90deg, rgba(0,0,0,0.04) 25%, rgba(0,0,0,0.06) 37%, rgba(0,0,0,0.04) 63%); background-size: 400% 100%; animation: sg-shimmer 1.4s ease infinite; }
  .skeleton-card { @apply rounded-lg min-h-[320px]; background: linear-gradient(90deg, rgba(0,0,0,0.03) 25%, rgba(0,0,0,0.06) 37%, rgba(0,0,0,0.03) 63%); background-size: 400% 100%; animation: sg-shimmer 1.4s ease infinite; }

  /* Empty & spinner */
  .empty { @apply text-center p-8 border border-light rounded-xl bg-white; }
  .empty__title { @apply font-extrabold tracking-tight; }
  .empty__text { @apply text-dark/75; }
  @keyframes sg-spin { to { transform: rotate(360deg); } }
  .spinner { @apply w-5 h-5 rounded-full border-2; border-color: rgba(0,0,0,.15); border-top-color: theme('colors.brand'); animation: sg-spin 1s linear infinite; }

  /* Price */
  .price { @apply text-[1.35rem] font-black tracking-tight text-dark sm:text-[1.5rem]; }
  .price small { @apply text-[0.8rem] font-bold text-dark/70; }

  /* Header spacing & divider cleanup */
  #mainNav .container { @apply py-2; }
  #mainNav ul { @apply m-0 p-0; }
  #site-header > .border-b { border-bottom-width: 0; }

  /* Mega panel grid spacing */
  .mega-panel .mega-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(252px, 1fr));
    column-gap: 24px;
    row-gap: 14px;
    padding: 16px;
    max-height: 62vh;
    overflow: auto;
    padding-right: 18px;
  }
  .mega-panel .mega-grid::-webkit-scrollbar { height: 8px; width: 8px; }
  .mega-panel .mega-grid::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.15); border-radius: 8px; }
  .mega-panel .mega-grid::-webkit-scrollbar-track { background: transparent; }

  /* Pills improvements */
  .pill { @apply inline-flex items-center justify-center gap-2 px-4 py-1.5 rounded-full font-extrabold text-sm border transition-colors; }
  .pill--primary { @apply border-brand/20 bg-brand/10 text-[#7d0047] hover:bg-brand/15; }
  .pill--secondary { @apply border-teal/20 bg-teal/10 text-teal hover:bg-teal/15; }
  .pill--neutral { @apply border-black/10 bg-black/5 text-dark hover:bg-black/10; }
  .pill:focus-visible { @apply outline-none ring-2 ring-brand; }
  .pill.is-active, .pill[aria-pressed="true"] { @apply bg-brand border-brand text-white; }
  .pill--secondary.is-active, .pill--secondary[aria-pressed="true"] { @apply bg-teal border-teal text-white; }
  .pill--neutral.is-active, .pill--neutral[aria-pressed="true"] { @apply bg-[#111827] border-[#111827] text-white; }
  /* Footer-scoped readable pills */
  .footer-premium .pill { @apply text-white border-white/35 bg-white/10 hover:bg-white/15; }
  .footer-premium .pill--primary { @apply text-white border-white/35 bg-white/10 hover:bg-white/20; }
  .footer-premium .pill--secondary { @apply text-white border-white/35 bg-white/10 hover:bg-white/20; }
  .footer-premium .pill--neutral { @apply text-white border-white/35 bg-white/10 hover:bg-white/15; }
}

